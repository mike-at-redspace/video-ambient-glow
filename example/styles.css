/**
 * Styles for the video-ambient-glow example
 */
@import 'tailwindcss';

@layer tokens, base, components;

/* ============================================================================
    TOKENS: Design tokens and CSS custom properties
    ============================================================================ */

@layer tokens {
  :root {
    /* Tweakpane theme */
    --tp-base-background-color: hsla(0, 0%, 10%, 0.55);
    --tp-base-shadow-color: hsla(0, 0%, 0%, 0.3);
    --tp-button-background-color: hsla(0, 0%, 70%, 1);
    --tp-button-background-color-active: hsla(0, 0%, 95%, 1);
    --tp-button-background-color-focus: hsla(0, 0%, 90%, 1);
    --tp-button-background-color-hover: hsla(0, 0%, 78%, 1);
    --tp-button-foreground-color: hsla(0, 0%, 0%, 0.85);
    --tp-container-background-color: hsla(0, 0%, 0%, 0.25);
    --tp-container-background-color-active: hsla(0, 0%, 0%, 0.55);
    --tp-container-background-color-focus: hsla(0, 0%, 0%, 0.45);
    --tp-container-background-color-hover: hsla(0, 0%, 0%, 0.35);
    --tp-container-foreground-color: hsla(0, 0%, 100%, 0.55);
    --tp-groove-foreground-color: hsla(0, 0%, 0%, 0.25);
    --tp-input-background-color: hsla(0, 0%, 0%, 0.25);
    --tp-input-background-color-active: hsla(0, 0%, 0%, 0.55);
    --tp-input-background-color-focus: hsla(0, 0%, 0%, 0.45);
    --tp-input-background-color-hover: hsla(0, 0%, 0%, 0.35);
    --tp-input-foreground-color: hsla(0, 0%, 100%, 0.55);
    --tp-label-foreground-color: hsla(0, 0%, 100%, 0.55);
    --tp-monitor-background-color: hsla(0, 0%, 0%, 0.25);
    --tp-monitor-foreground-color: hsla(0, 0%, 100%, 0.35);

    --gradient-0: linear-gradient(
      217deg,
      theme('colors.pink.500'),
      theme('colors.yellow.300')
    );
    --gradient-1: linear-gradient(
      145deg,
      theme('colors.yellow.600'),
      theme('colors.amber.500')
    );
    --gradient-2: linear-gradient(
      328deg,
      theme('colors.orange.900'),
      theme('colors.violet.500')
    );
    --gradient-3: linear-gradient(
      92deg,
      theme('colors.violet.300'),
      theme('colors.pink.200')
    );
    --gradient-4: linear-gradient(
      168deg,
      theme('colors.pink.400'),
      theme('colors.slate.300')
    );
    --gradient-5: linear-gradient(
      203deg,
      theme('colors.green.300'),
      theme('colors.pink.500')
    );
    --gradient-6: linear-gradient(
      75deg,
      theme('colors.slate.200'),
      theme('colors.green.500')
    );
    --gradient-7: linear-gradient(
      254deg,
      theme('colors.yellow.200'),
      theme('colors.sky.100')
    );
    --gradient-8: linear-gradient(
      112deg,
      theme('colors.teal.300'),
      theme('colors.purple.700')
    );
    --gradient-9: linear-gradient(
      189deg,
      theme('colors.slate.600'),
      theme('colors.slate.50')
    );
    --gradient-10: linear-gradient(
      48deg,
      theme('colors.emerald.500'),
      theme('colors.cyan.400')
    );
    --gradient-11: linear-gradient(
      336deg,
      theme('colors.red.700'),
      theme('colors.blue.500')
    );
    --gradient-12: linear-gradient(
      158deg,
      theme('colors.rose.500'),
      theme('colors.blue.200')
    );
    --gradient-13: linear-gradient(
      285deg,
      theme('colors.blue.400'),
      theme('colors.cyan.500')
    );
    --gradient-14: linear-gradient(
      124deg,
      theme('colors.blue.800'),
      theme('colors.violet.300')
    );
    --gradient-15: linear-gradient(
      67deg,
      theme('colors.amber.700'),
      theme('colors.slate.500')
    );
  }
}

/* ============================================================================
    BASE: Base element styles and resets
    ============================================================================ */

@layer base {
  html,
  body {
    @apply m-0 p-0 w-full h-full overflow-hidden box-border;
  }

  *,
  *::before,
  *::after {
    @apply box-border antialiased;
  }

  body {
    @apply relative;
    background: #0f0f0f;
    color: #f1f1f1;
    font-family:
      Inter,
      ui-sans-serif,
      system-ui,
      -apple-system,
      'Segoe UI',
      Roboto,
      'Helvetica Neue',
      Arial;

    @media (min-width: 1024px) {
      @apply overflow-x-hidden overflow-y-auto;
      -webkit-overflow-scrolling: touch;
    }
  }
}

/* ============================================================================
    COMPONENTS: Component-specific styles
    ============================================================================ */

@layer components {
  /* ========================================================================
      App Layout
      ======================================================================== */
  .app-main {
    @apply flex justify-center px-2 pt-2 relative overflow-x-hidden overflow-y-hidden w-full;
    max-width: 1920px;
    height: 100vh;

    @media (min-width: 1024px) {
      @apply overflow-y-auto;
      -webkit-overflow-scrolling: touch;
    }
  }

  .app-grid {
    @apply flex flex-col w-full h-full relative min-w-0 p-2;
    max-width: 1920px;
    overflow: visible;
    contain: none;

    @media (min-width: 1024px) {
      @apply grid gap-4;
      grid-template-columns: 1fr minmax(0, 420px);
    }
  }

  /* ========================================================================
      Content Section
      ======================================================================== */
  .content-section {
    @apply relative w-full shrink min-w-0;
    flex-basis: 0;
    overflow: visible;
    contain: none;

    @media (max-width: 1023px) {
      @apply h-fit;
      .comments-section {
        @apply hidden;
      }
    }

    @media (min-width: 1024px) {
      @apply h-full;
    }
  }

  /* ========================================================================
      Video Wrapper - allows glow to bleed while containing layout
      ======================================================================== */
  .video-wrapper {
    @apply relative w-full min-w-0 max-w-full;
    overflow: visible;
    contain: none;
  }

  .video-container {
    @apply relative flex justify-center items-center bg-black w-full shrink min-w-0 rounded-2xl;
    aspect-ratio: 16 / 9;
    width: 100%;
    overflow: visible;

    canvas {
      @apply object-contain;
      width: auto;
      max-width: none;
      max-height: none;
      min-width: 0;
      min-height: 0;
      overflow: visible;
      contain: none;
    }
  }

  .video-player {
    @apply w-full relative z-10 rounded-lg;
  }

  .video-details {
    @apply mt-4 px-4;
    @media (min-width: 1024px) {
      @apply px-0;
    }

    .video-title {
      @apply font-bold;
      @media (max-width: 1023px) {
        @apply text-lg;
      }
      @media (min-width: 1024px) {
        @apply text-2xl;
      }
    }

    .video-meta {
      @apply text-neutral-400 mt-1 font-normal;
      @media (max-width: 1023px) {
        @apply text-xs;
      }
      @media (min-width: 1024px) {
        @apply text-sm;
      }

      .video-meta-highlight {
        @apply text-fuchsia-400 font-semibold;
      }
    }

    .video-description {
      @apply mt-3 text-neutral-300 font-normal;
      @media (max-width: 1023px) {
        @apply text-sm;
      }
      @media (min-width: 1024px) {
        @apply text-base;
      }
    }
  }

  /* ========================================================================
      Comments Section
      ======================================================================== */
  .comments-section {
    @apply mt-6 bg-neutral-900/40 rounded-xl p-4;
    @media (max-width: 1023px) {
      @apply mx-4;
    }

    .comments-title {
      @apply text-sm font-bold mb-3;
    }

    .comments-list {
      @apply space-y-3;

      .comment-item {
        @apply flex gap-3;

        .comment-avatar {
          @apply w-10 h-10 bg-neutral-700 rounded-full;
        }

        .comment-author {
          @apply text-sm font-semibold;

          .comment-time {
            @apply text-xs text-neutral-500 font-normal;
          }
        }

        .comment-text {
          @apply text-sm text-neutral-300 font-light;
        }
      }
    }
  }

  /* ========================================================================
      Sidebar
      ======================================================================== */
  .sidebar {
    @apply flex flex-col space-y-4 flex-1 min-h-0 min-w-0 overflow-hidden w-full max-w-full shrink;
    background: transparent;

    @media (max-width: 1023px) {
      @apply flex-1 overflow-y-auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      -ms-overflow-style: none;

      &::-webkit-scrollbar {
        @apply hidden;
      }
    }

    @media (min-width: 1024px) {
      @apply p-3 pr-0 mr-1 rounded-xl;
      background: hsla(0, 0%, 0%, 0.3);
      scrollbar-width: thin;
      scrollbar-color: #404040 transparent;

      &::-webkit-scrollbar {
        @apply w-1.5;
      }

      &::-webkit-scrollbar-track {
        @apply bg-transparent;
      }

      &::-webkit-scrollbar-thumb {
        @apply rounded border border-transparent;
        background-color: #404040;

        &:hover {
          background-color: #525252;
        }
      }
    }

    .sidebar-title {
      @apply text-lg font-extrabold shrink-0;
      @media (max-width: 1023px) {
        @apply px-4 pt-4;
      }
      @media (min-width: 1024px) {
        @apply px-0;
      }
    }

    .sidebar-content {
      @apply space-y-3 flex-1 min-h-0 overflow-y-auto;
      -webkit-overflow-scrolling: touch;

      @media (max-width: 1023px) {
        @apply px-4 pb-4;
        scrollbar-width: none;
        -ms-overflow-style: none;

        &::-webkit-scrollbar {
          @apply hidden;
        }
      }

      @media (min-width: 1024px) {
        @apply mr-1 snap-y pr-1;
        scrollbar-width: thin;
        scrollbar-color: #404040 transparent;

        &::-webkit-scrollbar {
          @apply w-1.5;
        }

        &::-webkit-scrollbar-track {
          @apply bg-transparent;
        }

        &::-webkit-scrollbar-thumb {
          @apply rounded;
          background-color: #404040;
        }
      }
    }
  }

  /* ========================================================================
      Video Cards
      ======================================================================== */
  .video-card {
    @apply flex items-center gap-3 cursor-pointer snap-start transition-all duration-200 min-w-0 shrink;
    min-height: 112px;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;

    @media (max-width: 1023px) {
      @apply w-full px-4 py-3 rounded-none border-0 bg-transparent;

      &:active {
        @apply bg-neutral-800/40;
      }
    }

    @media (min-width: 1024px) {
      @apply p-3 rounded-xl border bg-linear-to-br from-neutral-900/80 to-neutral-900/40 border-neutral-800/50;
      @apply hover:bg-neutral-800/60 hover:shadow-lg hover:shadow-zinc-500/10;
      min-height: auto;
    }

    .video-card-thumb {
      @apply rounded-lg shadow-lg relative shrink-0 min-w-0;
      aspect-ratio: 16 / 9;

      @media (max-width: 1023px) {
        @apply w-[40%];
        max-width: 180px;
      }

      @media (min-width: 1024px) {
        @apply w-32 min-w-24 h-20;
      }
    }

    /* Metadata wrapper div */
    .video-card > div:last-child {
      @apply flex flex-col justify-center;
      flex: 1 1 auto;
      min-width: 0;
    }

    .video-card-title {
      @apply font-bold text-neutral-50 line-clamp-2;
      @media (max-width: 1023px) {
        @apply text-sm mb-1;
      }
      @media (min-width: 1024px) {
        @apply text-base mb-1.5;
      }
    }

    .video-card-publisher {
      @apply text-neutral-400 font-medium;
      @media (max-width: 1023px) {
        @apply text-xs;
      }
      @media (min-width: 1024px) {
        @apply text-sm;
      }
    }

    .video-card-meta {
      @apply text-neutral-500 flex items-center gap-2 font-light text-xs mt-0.5;

      .video-card-meta-separator {
        @apply text-neutral-600;
      }
    }
  }

  /* ========================================================================
      Utility Components
      ======================================================================== */
  #spinner {
    @apply absolute top-1/2 left-1/2 w-10 h-10 rounded-full hidden z-100 border-4 border-white/20 border-t-white;
    transform: translate(-50%, -50%) rotate(0deg);
    transform-origin: center;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin {
    to {
      transform: translate(-50%, -50%) rotate(360deg);
    }
  }

  .thumb {
    &::after {
      @apply absolute top-1/2 left-1/2 opacity-0 pointer-events-none z-10;
      @apply text-[50px] text-white/75;
      @apply transition-opacity duration-150 ease-in-out;
      content: 'â–¶';
      transform: translate(-50%, -50%);
    }
  }

  .playing .thumb::after {
    @apply opacity-100;
  }
}

/* ============================================================================
    THIRD-PARTY: Styles for external libraries
    ============================================================================
    Note: Tweakpane styles are outside @layer because Tweakpane injects
    unlayered styles, and unlayered styles always override layered styles.
    We use increased specificity (#app body .tp-dfwv) to override Tweakpane's
    injected styles (.tp-dfwv).
    ============================================================================ */

body#app,
#app body {
  --font-google-sans-code: 'Google Sans Code', monospace !important;

  /* Root visual tweaks */
  .tp-rotv {
    @apply backdrop-blur-3xl;
  }

  /* Rotator value container */
  .tp-rotv_b {
    @apply h-fit pb-1;
  }

  /* Rotator title text */
  .tp-rotv_t {
    @apply p-0 cursor-move select-none;
    font-family: var(--font-google-sans-code);
    font-weight: 800;
    font-size: 1.2rem;
    font-variant: all-small-caps;
  }

  /* Text inputs */
  .tp-txtv_i {
    font-family: var(--font-google-sans-code);
    font-weight: 300;
  }

  /* Label + button areas */
  .tp-dfwv .tp-lblv_l,
  .tp-dfwv .tp-lblv:first-child {
    font-family: var(--font-google-sans-code);
    font-weight: 500;
  }

  /* Button labels inside label views */
  .tp-lblv .tp-btnv_b {
    @apply flex flex-col h-6;
    font-family: var(--font-google-sans-code);
    font-weight: 800;
    font-size: 1.2rem;
    font-variant: all-small-caps;
  }
}
